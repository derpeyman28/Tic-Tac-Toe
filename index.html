<html>
    <head>
        <title>Tic Tac Toe!</title>
        <style>
            
            td {
                border: 1px solid blue;
                width: 200px;
                height: 200px;
            }

            td:hover {
                background: orange;
            }           

            table {
                border: 1px solid green;
            }

        </style>
    </head>
    <body>

        <h1>Tic Tac Toe!</h1>
        <table>
            <tr>
                <td id = "1"></td>
                <td id = "2"></td>
                <td id = "3"></td>
            </tr>
            <tr>
                <td id = "4"></td>
                <td id = "5"></td>
                <td id = "6"></td>
            </tr>
            <tr>
                <td id = "7"></td>
                <td id = "8"></td>
                <td id = "9"></td>
            </tr>
        </table>
        <h2 id = "winmessage"></h2>
    </body>
    <script>
        function checkWinner () {
            console.log("Checking for winning combinations...") 
            for(i = 0; i < winningCombinations.length; i++){
                let matches = 0
                for(j = 0; j < winningCombinations[i].length; j++) {
                    var currentCell = document.getElementById(winningCombinations[i][j])
                    console.log("current cell: " + currentCell)
                    if (currentPlayer === currentCell.textContent) {
                        matches++
                    } else {
                        break
                    }
                    
                }
                if (matches === 3) {
                    document.getElementById("winmessage").innerHTML = currentPlayer + " wins!";
                    console.log(currentPlayer + " wins")
                    return true
                }
            }
            return false
        }
        var currentPlayer = "X";
        var nextPlayer = "O";
        var playerXSelections = new Array();
        var playerOSelections = new Array();
        const winningCombinations = [
            [1, 2, 3],
            [4, 5, 6],
            [7, 8, 9],
            [1, 4, 7],
            [2, 5, 8],
            [3, 6, 9],
            [1, 5, 9],
            [3, 5, 7]
        ]
        handleClick = function(event) {
            var cell = event.target
            console.log("Cell " + cell.id + " clicked");
            cell.innerHTML = currentPlayer;
            console.log(currentPlayer + " added to " + cell.id)
            if(currentPlayer === "X" ) {
                playerSelections = playerXSelections;
                nextPlayer = "O";
            } else {
                playerSelections = playerOSelections;
                nextPlayer = "X";
            }
            checkWinner()
            playerSelections.push(parseInt(cell.id));
            // Swap players
            currentPlayer = nextPlayer;
            console.log("It is now player " + currentPlayer + "'s turn")
        }

        var cells = document.querySelectorAll("td");

        for(var i = 0; i < cells.length; i++) {
            cells[i].addEventListener('click', handleClick)
        }
    </script>
</html>